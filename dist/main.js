(()=>{"use strict";class e{name;moves=[];sprite;id;types=[];evolutions=[];constructor(e,t,s,n,o,i){this.name=e,this.moves=t,this.sprite=s,this.id=n,this.types=o,this.evolutions=i}}const t=new class{baseUrl="https://pokeapi.co/api/v2/";speciesQuery="pokemon-species/";pokeQuery="pokemon/";constructor(){}async toPokemon(t){const s=t.name;let n=[];t.moves.length&&(n=this.pickMoves(t.moves));const o=t.sprites.front_default,i=t.id;let r=[];t.types.length&&(r=this.fixTypes(t.types));let a=await this.fixEvolutions(t.id);return new e(s,n,o,i,r,a)}async getSpecies(e){return await fetch(this.baseUrl+this.speciesQuery+e)}async getEvolutions(e){const t=await this.getSpecies(e),s=await t.json();return await fetch(s.evolution_chain.url)}fixTypes(e){let t=[];for(let s=0;s<e.length;s++)t.push(e[s].type.name);return t}async fixEvolutions(e){let t=[];const s=await this.getEvolutions(e),n=await s.json();if(t.push(n.chain.species.name),n.chain.evolves_to.length)for(let e=0;e<n.chain.evolves_to.length;e++)if(t.push(n.chain.evolves_to[e].species.name),n.chain.evolves_to[e].evolves_to.length)for(let s=0;s<n.chain.evolves_to[e].evolves_to.length;s++)t.push(n.chain.evolves_to[e].evolves_to[s].species.name);return t}async getPokemon(e){return await fetch(this.baseUrl+this.pokeQuery+e)}pickMoves(e){this.shuffle(e);const t=e.slice(0,4);let s=[];for(let e=0;e<t.length;e++)s.push(t[e].move.name);return s}shuffle(e){let t,s=e.length;for(;0!==s;)t=Math.floor(Math.random()*s),s--,[e[s],e[t]]=[e[t],e[s]];return e}},s=new class{baseUrl="https://pokeapi.co/api/v2/";pokeQuery="pokemon/";currentPokemon;constructor(){}async getPokemon(e){return await fetch(this.baseUrl+this.pokeQuery+e)}},n=new class{target=document.getElementById("target");constructor(){}resetDiv(){this.target.innerHTML=""}renderPokemon(e){this.wrapText(e.name),this.wrapText(e.id),this.generateImg(e.sprite);for(let t=0;t<e.moves.length;t++)this.wrapText(e.moves[t]);for(let t=0;t<e.types.length;t++)this.wrapText(e.types[t])}wrapText(e){const t=document.createElement("div");t.innerText=e,this.target.appendChild(t)}generateImg(e){const t=document.createElement("img");t.src=e,this.target.appendChild(t)}};async function o(e){const n=await s.getPokemon(e),o=await n.json();return await t.toPokemon(o)}document.getElementById("run").addEventListener("click",(function(){n.resetDiv(),o(document.getElementById("search").value).then((e=>{s.currentPokemon=e,n.renderPokemon(s.currentPokemon);for(let e=0;e<s.currentPokemon.evolutions.length;e++)o(s.currentPokemon.evolutions[e]).then((e=>{n.renderPokemon(e)}));console.log(s.currentPokemon)}))}))})();